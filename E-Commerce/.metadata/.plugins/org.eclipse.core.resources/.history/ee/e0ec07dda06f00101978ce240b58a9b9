<%@ page import="java.util.List" %>
<%@ page import="com.example.upload.model.FileUpload" %>
<%
    List<FileUpload> files = (List<FileUpload>) request.getAttribute("files");
%>
<!DOCTYPE html>
<html>
<head>
    <title>Uploaded Files</title>
</head>
<body>
<h2>Uploaded Files</h2>
<a href="uploadForm">Upload More</a><br><br>

<%
    for (FileUpload file : files) {
        String path = file.getFilePath();
        if (path.endsWith(".mp4") || path.endsWith(".avi") || path.endsWith(".mov")) {
%>
            <video width="320" height="240" controls>
                <source src="<%=path%>" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <br><br>
<%
        } else { // assume it's an image
%>
            <img src="<%=path%>" width="200" height="150" alt="Image"/><br><br>
<%
        }
    }
%>
</body>
</html>
